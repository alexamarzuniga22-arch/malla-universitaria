<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Medicina y Cirug√≠a</title>

<style>
/* ===== FONDO GENERAL (un poco m√°s oscuro) ===== */
body{
  margin:0;
  padding:30px;
  font-family:"Times New Roman", serif;
  background:#e9e1f5; /* antes muy claro, ahora un poco m√°s oscuro */
}

/* ===== T√çTULO ===== */
h1{
  text-align:center;
  color:#5a2d82;
  margin-bottom:5px;
}

/* ===== CONTADOR ===== */
#contador{
  text-align:center;
  font-size:16px;
  color:#6a4bb3;
  margin-bottom:30px;
}

/* ===== MALLA GENERAL (4 POR FILA) ===== */
.malla{
  display:grid;
  grid-template-columns:repeat(4, 1fr);
  gap:25px;
}

@media (max-width:1100px){
  .malla{ grid-template-columns:repeat(3, 1fr); }
}
@media (max-width:800px){
  .malla{ grid-template-columns:repeat(2, 1fr); }
}
@media (max-width:500px){
  .malla{ grid-template-columns:1fr; }
}

/* ===== TARJETA PERIODO ===== */
.periodo{
  background:#d7c9f1;
  border-radius:22px;
  padding:20px;
}

/* ===== T√çTULO PERIODO ===== */
.periodo h2{
  text-align:center;
  color:#4b2673;
  margin-bottom:15px;
}

/* ===== LISTAS ===== */
.lista{
  display:flex;
  flex-direction:column;
  gap:10px;
}

.lista-doble{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}

/* ===== MATERIA NORMAL ===== */
.materia{
  background:#f0eaff;
  color:#4b2673;
  padding:9px 10px;
  border-radius:12px;
  cursor:pointer;
  text-align:center;
  transition:
    background 0.5s ease,
    color 0.5s ease,
    text-decoration 0.5s ease,
    opacity 0.5s ease;
}

/* ===== MATERIA APROBADA ===== */
.materia.completada{
  background:#f0c7dd;   /* rosa pastel */
  color:#4b2673;
  text-decoration:line-through;
}

/* ===== MATERIA BLOQUEADA (LILA GRIS√ÅCEO BIEN VISIBLE) ===== */
.materia.bloqueada{
  background:#b8aecf;   /* M√ÅS OSCURO, lila gris√°ceo */
  color:#5c5670;
  cursor:not-allowed;
  opacity:0.85;
  text-decoration:none;
}
</style>
</head>

<body>

<h1>Medicina y Cirug√≠a</h1>
<div id="contador">Materias aprobadas: 0</div>

<div class="malla">

<!-- PERIODO 1 -->
<div class="periodo">
<h2>Periodo 1</h2>
<div class="lista">
<div class="materia">F√≠sica M√©dica</div>
<div class="materia">Qu√≠mica M√©dica</div>
<div class="materia">Matem√°ticas</div>
<div class="materia">Ingl√©s I</div>
<div class="materia">Filosof√≠a</div>
<div class="materia">Espa√±ol</div>
</div>
</div>

<!-- PERIODO 2 -->
<div class="periodo">
<h2>Periodo 2</h2>
<div class="lista">
<div class="materia">Biolog√≠a M√©dica</div>
<div class="materia" data-req="Qu√≠mica M√©dica|Matem√°ticas">Qu√≠mica M√©dica II</div>
<div class="materia" data-req="Filosof√≠a">√âtica</div>
<div class="materia" data-req="Ingl√©s I">Ingl√©s II</div>
<div class="materia">Sociolog√≠a</div>
<div class="materia">Historia de Honduras</div>
</div>
</div>

<!-- PERIODO 3 -->
<div class="periodo">
<h2>Periodo 3</h2>
<div class="lista">
<div class="materia" data-req="F√≠sica M√©dica|Biolog√≠a M√©dica">Biof√≠sica</div>
<div class="materia">Arte o Deporte</div>
<div class="materia" data-req="Matem√°ticas">Bioestad√≠stica</div>
<div class="materia" data-req="Ingl√©s II">Ingl√©s III</div>
<div class="materia">Educaci√≥n Ambiental</div>
<div class="materia" data-req="Sociolog√≠a|Historia de Honduras">Introducci√≥n a la Salud P√∫blica</div>
</div>
</div>

<!-- PERIODO 4 -->
<div class="periodo">
<h2>Periodo 4</h2>
<div class="lista">
<div class="materia" data-req="Biof√≠sica|Ingl√©s III|Educaci√≥n Ambiental">Anatom√≠a Macro</div>
<div class="materia" data-req="Biof√≠sica|Ingl√©s III|Educaci√≥n Ambiental">Embriolog√≠a</div>
<div class="materia" data-req="Biof√≠sica|Ingl√©s III|Educaci√≥n Ambiental">Neuroanatom√≠a</div>
<div class="materia" data-req="Biof√≠sica|Ingl√©s III|Educaci√≥n Ambiental">Anatom√≠a Micro</div>
</div>
</div>
<!-- PERIODO 5 -->
<div class="periodo">
<h2>Periodo 5</h2>
<div class="lista">
<div class="materia">Fisiolog√≠a</div>
<div class="materia">Bioqu√≠mica</div>
<div class="materia">Psicolog√≠a M√©dica</div>
<div class="materia">Salud P√∫blica I</div>
</div>
</div>

<!-- PERIODO 6 -->
<div class="periodo">
<h2>Periodo 6</h2>
<div class="lista">
<div class="materia">Microbiolog√≠a</div>
<div class="materia">Gen√©tica</div>
<div class="materia">Servicio Social Formativo</div>
<div class="materia">Salud P√∫blica II</div>
</div>
</div>

<!-- PERIODO 7 -->
<div class="periodo">
<h2>Periodo 7</h2>
<div class="lista">
<div class="materia">Patolog√≠a I</div>
<div class="materia">Farmacolog√≠a I</div>
<div class="materia">Fisiopatolog√≠a I</div>
<div class="materia">Introducci√≥n a la Cl√≠nica I</div>
</div>
</div>

<!-- PERIODO 8 -->
<div class="periodo">
<h2>Periodo 8</h2>
<div class="lista">
<div class="materia">Patolog√≠a II</div>
<div class="materia">Farmacolog√≠a II</div>
<div class="materia">Fisiopatolog√≠a II</div>
<div class="materia">Introducci√≥n a la Cl√≠nica II</div>
<div class="materia">Psicopatolog√≠a</div>
</div>
</div>

<!-- PERIODO 9 Y 10 -->
<div class="periodo">
<h2>Periodo 9 y 10</h2>
<div class="lista-doble">
<div class="materia">Cirug√≠a I</div>
<div class="materia">Medicina I</div>
<div class="materia">Radiolog√≠a</div>
<div class="materia">T√©cnicas y Proc. M√©d.</div>
<div class="materia">Gineco Obstetricia I</div>
<div class="materia">Pediatr√≠a</div>
<div class="materia">Epidemiolog√≠a</div>
<div class="materia">Psiquiatr√≠a</div>
<div class="materia">Salud P√∫blica III</div>
</div>
</div>

<!-- PERIODO 11 Y 12 -->
<div class="periodo">
<h2>Periodo 11 y 12</h2>
<div class="lista-doble">
<div class="materia">Cl√≠nica Cirug√≠a II</div>
<div class="materia">Urolog√≠a</div>
<div class="materia">Cl√≠nica M√©dica II</div>
<div class="materia">Cl√≠nica Gineco Obstetricia II</div>
<div class="materia">Cl√≠nica Pediatr√≠a</div>
<div class="materia">Oftalmolog√≠a</div>
<div class="materia">Medicina Legal</div>
<div class="materia">Radiolog√≠a II</div>
<div class="materia">Medicina Psicosom√°tica</div>
<div class="materia">Higiene Mental</div>
<div class="materia">Neurolog√≠a</div>
<div class="materia">Ortopedia</div>
<div class="materia">Dermatolog√≠a</div>
<div class="materia">Salud P√∫blica IV</div>
<div class="materia">Otorrinolaringolog√≠a</div>
</div>
</div>

<!-- INTERNADO -->
<div class="periodo">
<h2>Internado Rotatorio</h2>
<div class="lista">
<div class="materia">Terap√©utica Cl√≠nica</div>
<div class="materia">Internado en Cirug√≠a</div>
<div class="materia">Internado en Gineco-Obstetricia</div>
<div class="materia">Internado en Medicina</div>
<div class="materia">Internado en Pediatr√≠a</div>
</div>
</div>

</div>

<script>
<!-- BOT√ìN GUARDAR PROGRESO -->
<button id="loginBtn">Guardar progreso</button>

<style>
#loginBtn{
  position:fixed;
  bottom:20px;
  right:20px;
  background:#6b3fa0;
  color:white;
  border:none;
  padding:12px 18px;
  border-radius:25px;
  font-family:"Times New Roman", serif;
  font-size:14px;
  cursor:pointer;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
}
#loginBtn:hover{
  background:#5a2d82;
}
</style>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* üî• TU CONFIG DE FIREBASE (NO CAMBIAR) */
const firebaseConfig = {
 apiKey: "AIzaSyDgc7TEtusHQLc_fNUfDAmHv8POQa2t9Fc",
    authDomain: "medina-y-cirugia.firebaseapp.com",
    projectId: "medina-y-cirugia",
    storageBucket: "medina-y-cirugia.firebasestorage.app",
    messagingSenderId: "366477595660",
    appId: "1:366477595660:web:08a9581745e08896fc0a29",
    measurementId: "G-HEJGVXZC4G" 
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
const provider = new GoogleAuthProvider();

const materias = document.querySelectorAll(".materia");
const contador = document.getElementById("contador");
const btn = document.getElementById("loginBtn");

let usuario = null;

/* üîê LOGIN */
btn.onclick = async ()=>{
  if(!usuario){
    await signInWithPopup(auth, provider);
  }
};

/* üíæ GUARDAR PROGRESO */
async function guardar(){
  if(!usuario) return;

  const aprobadas = [...materias]
    .filter(m=>m.classList.contains("tachada"))
    .map(m=>m.textContent);

  await setDoc(doc(db,"progreso",usuario.uid),{
    aprobadas
  });
}

/* üì• CARGAR PROGRESO */
async function cargar(){
  const ref = doc(db,"progreso",usuario.uid);
  const snap = await getDoc(ref);

  if(snap.exists()){
    const data = snap.data().aprobadas || [];
    materias.forEach(m=>{
      m.classList.toggle("tachada", data.includes(m.textContent));
    });
    actualizarContador();
  }
}

/* üî¢ CONTADOR */
function actualizarContador(){
  const total = document.querySelectorAll(".materia.tachada").length;
  contador.textContent = "Materias aprobadas: " + total;
}

/* üñ±Ô∏è CLICK EN MATERIAS */
materias.forEach(m=>{
  m.addEventListener("click", ()=>{
    if(m.classList.contains("bloqueada")) return;
    m.classList.toggle("tachada");
    actualizarContador();
    guardar();
  });
});

/* üë§ SESI√ìN */
onAuthStateChanged(auth,(user)=>{
  if(user){
    usuario = user;
    btn.textContent = "Progreso guardado ‚úì";
    cargar();
  }
});
</script>

</body>
</html>
